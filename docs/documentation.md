# Documentation

This file is intended to help anyone who wants to manipulate this repository.

## Basic information

### Tools used

This theme was created using the library [Yeoman](https://www.npmjs.com/package/generator-code) recommended by microsoft and to package and publish, the [vsce](https://www.npmjs.com/package/vsc) library. You can check the Microsoft official documentation on how to do it in this [link](https://code.visualstudio.com/api/get-started/your-first-extension).
You can install this libraries globally or locally depending on youre needs.

To publish youre theme you will need an Azure account and token.

To have a general idea on how to develop a VSCode theme i suggest to see this awsome 16 minutes [video](https://www.youtube.com/watch?v=pGzssFNtWXw) from **Coder Coder**.

### About this theme

Since this is a theme, the only important file(s) is the json file under the `themes` folder. Rest of files in this project are just to develop and test the theme.

Since a theme is just a huge json file with all the VSCode configurations, to generate this json, i have splitted it in diferent parts stored in TypeScript files.

To generate the theme, first you need to transpile from TypeScript to Javascript using `tsc` and then execute with `node` the transpiled `index.js` to generate the json files in the output folder configured in the `tsconfig` file.

#### Project structure

`src/index.ts`: This is the entrypoint of this theme. This file, when transpiled to Javascript will be in charge to generate the Themes.

`src/themes-config`: This folder contains the configurations of each themes in this pack. You can add/create a theme by adding a new file in it.

`src/model`: We try to map the fields available in theme Json file. In this folder you have all the models used in this theme. Remember that Microsoft add changes to the themes and maybe the structures changes over time. This mapping needs to be updated to this changes. This folder have the following subfolders and files:

- `src/models/ui-colors.ts`: This map contains the configurations of the UI like vscode tabs, menus, delimiters, etc..
- `src/models/editor-colors.ts`: This map contains all available configuration in the code editor (token colors) like sintax colors, comments, etc.. This part is huge, so i had to split it in several peaces that are in the `src/models/editor_color_fragments`.

## Developing

To specify a color you can use 8 digit hexadecimal format witch include alpha (transparency). Example: `"#ff00007f"`.

To identify a part of the ui or code editor, VSCode use TextMate grammar.

Check this [Semantic Highlight Guide](https://code.visualstudio.com/api/language-extensions/semantic-highlight-guide) and this [Syntax Highlight Guide](https://code.visualstudio.com/api/language-extensions/syntax-highlight-guide) for more information.

To develop the theme you will have to:

1. Execute the `watch` script.
2. Debug the theme by pressing the F5 key. This will open a new VSCode window with youre theme.
3. To discover what is the TextMate code you want to change, you can use the [Scope inspector](https://code.visualstudio.com/api/language-extensions/syntax-highlight-guide#scope-inspector) by pressing F1 to open the command palette and the search for `Developer: inspect editor tokens and scopes`.
4. Now that the inspector is toggle on, just clic in the part you are interested and you will see a popup window with the information and textmate scope.

> **Tips**:
>
> In the texmate scopes section, the first scope is the most specific, and the last one is the most generic. You can use 1 or more scopes to asign a color to this element.
>
> In the `foreground section` you have the actual scope being used by the element.
>
> The json file of the theme have autocomplete activated. Plaing with that you can get a lot of information about scopes.

## Packaging

https://code.visualstudio.com/api/working-with-extensions/publishing-extension#packaging-extensions

If you want to package your application without publishing it, for example to give it to a friend to test, you can do so with this command:

```
vsce package
```

The other person will only need to install it with this command:

```
code --install-extension < name of the file>
```

## Publishing

https://code.visualstudio.com/api/working-with-extensions/publishing-extension#publishing-extensions

> Before publishing, you will need to make sure that you have the dependencies for this project installed, your Azure account configured, and your PublisherId available.
> Also, we will not be allowed to publish our theme if the project does not have a Readme or if the one that is there is the one that has been generated by default.
> Also, do not use any svg files as icons, images or badges.
> Images urls need to resolve to `https`.

> The publish command will automatically update the project versioning by modifying the 'version' field in package.json.

The first step to publish is that you login in youre publisher account:

```
vsce login <publisher id>
```

Next, we will be asked to enter the access token that we have previously generated from the web (that is, the PAT that we created in the [Azure webpage](https://dev.azure.com) and the Personal access token). We will only have to paste it and press enter.

Now you can publish the theme using the comand `vsce publish` like that:

```
vsce publish [major|minor|patch]

// example:
vsce publish minor
```

**patch** is for small fixes.
**minor** is for some features or small non breaking changes.
**major** is for big changes.

Now if you go to the [marketplace](https://marketplace.visualstudio.com/manage), you will be able to see youre theme under the 'extensions' tab. You will probably need to wait a moment before the information get updated.

### Errors

You can check the [common questions section](https://code.visualstudio.com/api/working-with-extensions/publishing-extension#common-questions) to see if youre error is listed there.

If you get the following error when publishing:

```
The Personal Access Token verification has failed. Additional information: Error: Failed request: (401)
```

You need to modify youre token and select the `all organizations` in the `organizations`section and in the `Authorized scopes` section select `Market place (manage)`.

It's also possible that youre token have expired.
